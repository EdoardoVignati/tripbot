language: java
jdk: oraclejdk8
env:
  global:
    - secure: Geo2qrBil5nbXF1rhnYHrzr92WKZjmqVY75ZHT/aJsc8V6/Y5NiJjHmf8p0WGGYTWclakVx9bq4bpNgn/ykxehbkvPclQHTJv/EY5K4Ss9/OfEywmqjh0Luw4rSxV118lSAPi79Oc4nMrDl7HzHBN+3lczPBnG0SOhWP3Jry/oX3TWUiG1gip+Hm53uLKc+9NgzqFLiqqCRxUk0YHzouvbZXLY41U/ObkIMGEg+01mkB0+3tHyeqQAXO1TPITXeuNrEzPQwb2xqoTmoY3H30p5uN9qnbxOhUoY8ZoZ1jTw4mkvjDqY4HXJyT65fehZJ3OXlp1GZ7Hn9RGlULOVrJ8w==
    - secure: bTgkVA/642GJh2hsLdbW/ewXwGgtIAMXrepY0GYepLoFlYlfeUOl6Q2XIjNQf6bexTd//bZ5b+4oAQT0tj7AQvUclgiRupyeoo+m+xylzdAYqsvy8JxZVfr9FIg/eINhA6DmT0JRR4Hf/3i73nkmLIxtpjDJ3oAqeCJWtkcWHEY5XiUcwbB6nrox4Yg/7rzuT2bwWLa+0tHZLh7P9I7M8TM51puL7mkAi4Ngzn15l7h1h4DOFJUPjkokCG4ILy09/BY1MHK6bd92ONQNWeGXf/3izMnpqqz7qbajLgzuFudhit3RHNBOzzG3aW9Y16QmBgFoZJeRVorwul0tWhqNTg==
    - secure: Z36XghV69YuYyCuB9OQPya7lyHq3so01jUy81H40XAP453OkucTC2tldtUiB7p4aaeXplDVVHgZj+v2BfB2lz/jjHrkTMq0wYGHohlFrWu9rBeeJ3fO/YpCNpBInoX3pFaWTo0h/bqR1cmYXTyCdHbax72d9WpBb2xxxFHQKBnumKmDz39+bRlJErBovwHIWDqk/IWfLrhZ7cWS8TKdWoersg1ZmADvE3M7qozOUFHifyhxueTNT+C5DSPni1A6OSUJcGR722JdZXtvsqIkb+apjh4y0cRqywLu3Z9c14lf/78SdDTlUk+HpLrWgXiTYYfFluCG5xB+DXHFTYkS+5g==
    - secure: X7LV9phdtLA0fHVaQeZqqUx6yFDGXb1kFxU50fWC4bAxOtcia5b2aBoSDUb5NQC7FKdiXgrNK8Ud9dfRfmy+gX/PCMIA7k75W6OPW3JrVqWcNotRFaxhohTcgYZLR9CM1rltC1U9mHLCoY//3KLyOLUJNEy2lbNOl9kkcnapiuxNKbXqOo4d3UKL+5hVTk9m5B9Yu+uX7tJNOPpOYxg7ZbIaTbYXWbVu9BcKYGvCCFXwB4A8+esP6Y+zdm00w9bLiZ5HX7mW9MUmGfIEL1XXlmRa1nXJcn79n8DrxoEKFygBaLm+Wn+9pyzAylM/ypkBiekF3M6wk8q7gWLzFKzJGA==
    - secure: LP170Xx2nxmdXl3NTsCM6lMBj6q4yEyuWNih/PPIH8ArOqeOZ8+d5d7eoe5N65r6Y4W8SobSzwf9E4NZkV1SXWiZ1qqnbGzaALzQvZZXJnghpFKU1llqTS0/A96ThvAtvkvRAu39na+egh9BjBdgq0XrML7iZaJOcKVl6Bg6K+pERVvu75EOzGzfAj6wzrdDFyOpu89vZIr9TsONCkqrsDv45ErZN5DokHZQiMJ9TWZ0zmsPsGzyBYbaKTni5B7026rz42UGwBaxTfokH299u9Em18KHDgXfIZfaZvmI3zspaL2DI8uZejq4goR9TlrDHBrIzWf/MNrG0IGZysiyqw==

before_install:
  - curl -sLO https://raw.githubusercontent.com/rix0rrr/cover2cover/master/cover2cover.py
before_script:
  - mkdir -p shippable/codecoverage
script: ./gradlew check jacocoTestReport
after_script:
  - cp -rv build/test-results shippable/testresults
  - if [ -r build/reports/jacoco/test/jacocoTestReport.xml ]; then python cover2cover.py build/reports/jacoco/test/jacocoTestReport.xml src/main/java > shippable/codecoverage/coverage.xml; fi
