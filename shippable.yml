language: java
jdk: oraclejdk8
env:
  global:
    - secure: ebZ9ptxPmqC2fJOiD0UzZndC1tINrtSX13E465wKgb4zMZ3gRJGs/CZyU5qhViMkFFdasJN9LRzXNBRwCbEE7SmJG93emutZI1fos49X87D7hOgVEUkqCw0hWolfkprTS9cKwCBL14yO3qI8UXsGycsDzXmCMw+gBvJl4Cg352wQvf9OI0/kaU7rkILBScyYBeYzvdGiYAXZIBFRICEdhXXlYgK0DxRjUr2Ii12lS5dWMeVbNMr3yB+L+bsao+Cy508cLNxbLBd/QLrphbHWiWJmZEa5gT+lym4Ljo2ZM2sbAwZhBedPqcu/Ziqn2BJMfiEKq0O+3tI+e7jlXWvEVA==
    - secure: bTgkVA/642GJh2hsLdbW/ewXwGgtIAMXrepY0GYepLoFlYlfeUOl6Q2XIjNQf6bexTd//bZ5b+4oAQT0tj7AQvUclgiRupyeoo+m+xylzdAYqsvy8JxZVfr9FIg/eINhA6DmT0JRR4Hf/3i73nkmLIxtpjDJ3oAqeCJWtkcWHEY5XiUcwbB6nrox4Yg/7rzuT2bwWLa+0tHZLh7P9I7M8TM51puL7mkAi4Ngzn15l7h1h4DOFJUPjkokCG4ILy09/BY1MHK6bd92ONQNWeGXf/3izMnpqqz7qbajLgzuFudhit3RHNBOzzG3aW9Y16QmBgFoZJeRVorwul0tWhqNTg==
    - secure: OL8Y0QEe3wyDl55lGl+RGjj5RE6237BwzyzX5HdCbAgwfeJSQVIpWDlOkwSwgKFivEGYei/koSr6UnU6Jeo5PenIbtxAaTHcGNs8ztvb4phbp6bVz14wI7DSE/xsWlwPOMf1Zu40/M9GNXWOyij4mYaruWj2Tij2wsNO8fRhExXwxg9VpFmOGCRQ1yExUBt31uZSY+QWY82eaUEfbc1Qro8JeKGgkYjCEIDl8uA5Ja5acqAHjYmLPS2GhvUTdvaWp51AMoirVGd7Ozoblt0SjJFWhOYA734DhPI0qbrLEIlSG/Bl7DcIKBlCXg/+OiRKgTqqAV1TQ+7qC0szBupq6g==
    - secure: e2WaEHAoEOjj+b6+aRGDEHYT65DF2fKiCnr9WTUJfxxsSyP0jDD6DL+ICndbLRd4sTZ8KFWL/ndXtjZRBKBDIeSQysfRgATZ7lU4WGnemhpjPPZp1JpV35fO36XWuccSmSdHZSos80Y5FqRhVvIr+k9r75UFWBAOm3feGTlrOResJAIly8oW7rip3aKox15MIH28QIvVIp9SSzbFSTjtDAJ8n08xxDFJlaeNbpBGIgW4MsheHVEXj6JYe/srZ9pB7rnHLNHVs6bIyfGgg4Vx6MimPTw7lvPw2FVikB0kwYMeiAQWoUm+89aTxaTx/DxiAsR3zR8T2VJeY2FVg43lgw==
    - secure: DcPdqLQzhuL+PDLRXoNWcbta+gzq84qun3RbNJLjsaR+CDtJTRdKQbXDV5UEeJCpuE1i8NIUcmDS8mVEb7g3gPCw2GQOdaZfYQ171R2v3Qgm/O9rORhQVoTm6PE8Dlglhm8J6L8kKyTB5NQExOTJfGVTk47PvDALLbsVdEiFQiOW71ggyMMPMV6n10mX+jrQwwdH+wYVfXeNsifsZ6+XfA0/VAr21Cn/SBSxYfIABKITMUNteq71eibn5Lfsc/rLP4BSiBswES5f3q/Et4wyvl2+9UgppxiI4DBt/kWENRTbYo1KDPiBz+8RSmquLstBUk3pBlNEsVkdeISbQm747g==

before_install:
  - curl -sLO https://raw.githubusercontent.com/rix0rrr/cover2cover/master/cover2cover.py
before_script:
  - mkdir -p shippable/codecoverage
script: ./gradlew check jacocoTestReport
after_script:
  - cp -rv build/test-results shippable/testresults
  - if [ -r build/reports/jacoco/test/jacocoTestReport.xml ]; then python cover2cover.py build/reports/jacoco/test/jacocoTestReport.xml src/main/java > shippable/codecoverage/coverage.xml; fi
